# 编译环境要求

## 必需环境

### 1. .NET 8.0 SDK
项目目标框架为 `net8.0-windows`，需要安装 .NET 8.0 SDK。

**下载地址：**
- 官方下载：https://dotnet.microsoft.com/download/dotnet/8.0
- 选择 "SDK" 版本（不是 Runtime）

**安装后验证：**
```cmd
dotnet --version
```
应该显示 `8.0.x` 或更高版本。

### 2. ATAS Platform
项目依赖 ATAS Platform 的 DLL 文件，需要先安装 ATAS Platform。

**要求：**
- ATAS Platform 必须安装到默认路径：`C:\Program Files (x86)\ATAS Platform\`
- 如果安装在其他路径，需要修改 `ATASOrderFlowExporter.csproj` 文件中的引用路径

**必需的文件：**
- `ATAS.Indicators.dll`
- `Newtonsoft.Json.dll`
- `OFT.Attributes.dll`
- `OFT.Core.dll`
- `Utils.Common.dll`

### 3. Windows 操作系统
项目使用 WPF 和 Windows Forms，只能在 Windows 系统上编译和运行。

## 可选环境

### Visual Studio 2022（推荐）
虽然可以使用命令行编译，但 Visual Studio 提供更好的开发体验：
- 代码提示和智能感知
- 调试功能
- 项目管理

**下载地址：**
- https://visualstudio.microsoft.com/zh-hans/downloads/
- 安装时选择 ".NET 桌面开发" 工作负载

## 编译步骤

### 方法1：使用命令行
```cmd
cd "D:\codes\hxy\py_ATAS映射\ATAS订单流导出"
dotnet build -c Release
```

### 方法2：使用 Visual Studio
1. 打开 `ATASOrderFlowExporter.sln`
2. 选择 "Release" 配置
3. 生成 → 生成解决方案（或按 `Ctrl+Shift+B`）

## 编译输出

编译成功后，输出文件位于：
- `bin\Release\ATASOrderFlowExporter.dll`

如果配置了自动复制（Release 配置），会自动复制到：
- `C:\Users\Administrator\AppData\Roaming\ATAS\Indicators\`

## 常见问题

### 1. 找不到 dotnet 命令
**解决方法：**
- 确保已安装 .NET 8.0 SDK
- 重启命令提示符或 PowerShell
- 检查环境变量 PATH 是否包含 .NET SDK 路径

### 2. 找不到 ATAS Platform DLL
**错误信息：** `error CS0006: 找不到元数据文件 'ATAS.Indicators.dll'`

**解决方法：**
- 确保 ATAS Platform 已安装到 `C:\Program Files (x86)\ATAS Platform\`
- 如果安装在其他路径，修改 `.csproj` 文件中的 `<HintPath>` 路径

### 3. 编译时提示缺少 NuGet 包
**解决方法：**
```cmd
dotnet restore
```
这会自动下载项目所需的 NuGet 包。

## 验证安装

运行以下命令检查环境是否配置正确：

```cmd
# 检查 .NET SDK 版本
dotnet --version

# 检查 .NET SDK 列表
dotnet --list-sdks

# 检查项目依赖
dotnet restore

# 尝试编译
dotnet build -c Release
```

